## DFS + é˜Ÿåˆ—è§£æ³•

ç”±äºæ‰€æœ‰çš„å…ƒç´ éƒ½æ˜¯åœ¨åˆå§‹åŒ–æ—¶æä¾›çš„ï¼Œå› æ­¤ä¸€ä¸ªæœ´ç´ çš„åšæ³•æ˜¯åœ¨åˆå§‹åŒ–çš„æ—¶å€™è¿›è¡Œå¤„ç†ã€‚

ç”±äºå­˜åœ¨åµŒå¥—ï¼Œæ¯”è¾ƒç®€å•çš„åšæ³•æ˜¯é€šè¿‡ DFS è¿›è¡Œå¤„ç†ï¼Œå°†å…ƒç´ éƒ½æ”¾è‡³é˜Ÿåˆ—ã€‚

ä»£ç ï¼ˆæ„Ÿè°¢ [@å®«æ°´ä¸‰å¶çš„å°è¿·å¦¹](/u/san_ye_fen/) åŒå­¦å’Œ [@ğŸ­å¯ä¹å¯ä¹å—QAQ](/u/littletime_cc/) åŒå­¦ æä¾›çš„ python & cpp ç‰ˆæœ¬ï¼‰ï¼š

* []

```java
public class NestedIterator implements Iterator<Integer> {

    Deque<Integer> queue = new ArrayDeque<>();

    public NestedIterator(List<NestedInteger> nestedList) {
        dfs(nestedList);
    }

    @Override
    public Integer next() {
        return hasNext() ? queue.pollFirst() : -1;
    }

    @Override
    public boolean hasNext() {
        return !queue.isEmpty();
    }

    void dfs(List<NestedInteger> list) {
        for (NestedInteger item : list) {
            if (item.isInteger()) {
                queue.addLast(item.getInteger());
            } else {
                dfs(item.getList());
            }
        }
    }
}
```

* []

```python
class NestedIterator:
    def __init__(self, nestedList: [NestedInteger]):
        self.queue = []
        def dfs(nestedList):
            for item in nestedList:
                if item.isInteger() == True:
                    self.queue.append(item.getInteger())
                else:
                    dfs(item.getList())
        dfs(nestedList)
    
    def next(self) -> int:
        if self.hasNext() == True:
            return self.queue.pop(0)
        else:
            return -1
    
    def hasNext(self) -> bool:
        if not self.queue:
            return False
        else:
            return True
```

* []

```cpp
class NestedIterator {
public:
    deque<int> q;
    NestedIterator(vector<NestedInteger> &nestedList) {
        std::function<void(vector<NestedInteger>)> dfs = [&](vector<NestedInteger> nestedList){
            for(const auto& x : nestedList){
                if(x.isInteger()) q.push_back(x.getInteger());
                else dfs(x.getList());
            }
        };
        dfs(nestedList);
    }
    int next() {
        int ret = q.front(); q.pop_front();
        return ret;
    }
    
    bool hasNext() {
        return q.size();
    }
};
```

* æ—¶é—´å¤æ‚åº¦ï¼šæ„å»ºè¿­ä»£å™¨çš„å¤æ‚åº¦ä¸º $O(n)$ï¼Œè°ƒç”¨ $next()$ ä¸ $hasNext()$ çš„å¤æ‚åº¦ä¸º $O(1)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

***

## é€’å½’ + æ ˆ è§£æ³•

å¦å¤–ä¸€ä¸ªåšæ³•æ˜¯ï¼Œæˆ‘ä»¬ä¸å¯¹æ‰€æœ‰çš„å…ƒç´ è¿›è¡Œé¢„å¤„ç†ã€‚

è€Œæ˜¯å…ˆå°†æ‰€æœ‰çš„ `NestedInteger` é€†åºæ”¾åˆ°æ ˆä¸­ï¼Œå½“éœ€è¦å±•å¼€çš„æ—¶å€™æ‰è¿›è¡Œå±•å¼€ã€‚

ä»£ç ï¼š

* java

```java
public class NestedIterator implements Iterator<Integer> {

    Deque<NestedInteger> stack = new ArrayDeque<>();

    public NestedIterator(List<NestedInteger> list) {
        for (int i = list.size() - 1; i >= 0; i--) {
            NestedInteger item = list.get(i);
            stack.addLast(item);
        }
    }

    @Override
    public Integer next() {
        return hasNext() ? stack.pollLast().getInteger() : -1;
    }

    @Override
    public boolean hasNext() {
        if (stack.isEmpty()) {
            return false;
        } else {
            NestedInteger item = stack.peekLast();
            if (item.isInteger()) {
                return true;
            } else {
                item = stack.pollLast();
                List<NestedInteger> list = item.getList();
                for (int i = list.size() - 1; i >= 0; i--) {
                    stack.addLast(list.get(i));
                }
                return hasNext();
            }
        }
    }
}
```

* æ—¶é—´å¤æ‚åº¦ï¼šæ„å»ºè¿­ä»£å™¨çš„å¤æ‚åº¦ä¸º $O(n)$ï¼Œ$hasNext()$ çš„å¤æ‚åº¦ä¸ºå‡æ‘Š $O(1)$ï¼Œ$next()$ ä¸¥æ ¼æŒ‰ç…§è¿­ä»£å™¨çš„è®¿é—®é¡ºåºï¼ˆ å…ˆ $hasNext()$ å† $next()$ ï¼‰çš„è¯ä¸º $O(1)$ï¼Œé˜²å¾¡æ€§ç¼–ç¨‹ç”Ÿæ•ˆçš„æƒ…å†µä¸‹ä¸ºå‡æ‘Š $O(1)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

***

## æœ€å

**å¦‚æœæœ‰å¸®åŠ©åˆ°ä½ ï¼Œè¯·ç»™é¢˜è§£ç‚¹ä¸ªèµå’Œæ”¶è—ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ° ~ ("â–”â–¡â–”)/**

**å¦‚æœ‰ä¸ç†è§£çš„åœ°æ–¹ï¼Œæ¬¢è¿ä½ åœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€ï¼Œæˆ‘éƒ½ä¼šé€ä¸€å›å¤ ~**

ä¹Ÿæ¬¢è¿ä½  [å…³æ³¨æˆ‘](https://oscimg.oschina.net/oscnet/up-19688dc1af05cf8bdea43b2a863038ab9e5.png) å’Œ åŠ å…¥æˆ‘ä»¬çš„[ã€Œç»„é˜Ÿæ‰“å¡ã€](https://leetcode-cn.com/u/ac_oier/)å°ç¾¤ ï¼Œæä¾›å†™ã€Œè¯æ˜ã€&ã€Œæ€è·¯ã€çš„é«˜è´¨é‡é¢˜è§£
